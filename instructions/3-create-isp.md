# プレミアムハローワールド - スキル内課金を使ったスキルの作成
<img src="https://m.media-amazon.com/images/G/01/mobile-apps/dex/alexa/alexa-skills-kit/tutorials/quiz-game/header._TTH_.png" />

# Create In-Skill Products

このガイドの [1ページ目](./1-setup-vui-alexa-hosted.md) では、音声ユーザーインターフェイスの対話モデルを作成しました。 [2ページ目](./2-create-alexa-hosted-function.md) では、スキルのロジックを定義する Lambda 関数を作成しました。 今回は、ユーザーが購入できるスキル内商品を作成します。

このサンプルでは２つのスキル内商品を実装します。
ひとつは「挨拶パック(Greeting Pack)」という名前の買い切り型商品で、プレミアムコンテンツとして、いろんな言語の挨拶を聞くことができます。もう一つは「プレミアムサブスクリプション(Premium Subscription)」という名前の月々払いのサブスクリプション商品で、Amazon Pollyの声を使って、より自然な発音で各国の挨拶を聞くことができます。

1. **買い切り型商品**を作成する
2. **サブスクリプション商品**を作成する

## **買い切り型商品**を作成する

1. 開発者コンソールの **ビルド** タブで、左側の **スキル内商品** セクションをクリックして、マネタイゼーションツールを開きます。
1. 画面右上の **スキル内商品を作成** をクリックします。
1. スキル内商品の参照名を入力します。これはコードからスキル内商品を参照するための識別子です。スペースや特殊記号を含まない英語名で入力します。このサンプルのコードでは、`Greetings_Pack` という参照名を想定しています。
    > 全ての参照名を指定どおり正確に入力するように注意してください。これらの名前はサンプルコードから利用するため、一致しないとサンプルコードが動作しません。
1. **買い切り型**を選択します。
1. 画面右上の **スキル内商品を作成** ボタンをクリックします。
1. **サポートされる言語** の下の **新しい言語を追加** をクリックします。
1. **日本語(日本)** を選択します。
1. 商品の詳細情報を以下のように入力します。

    項目|説明|サンプル値
    ---|----|--------
    **表示名**|この商品の表示名。 ユーザーはこの名前を見たり聞いたりします。| 挨拶パック|
    **説明**| 商品の簡単な説明。 ユーザーはこの説明を聞くことになります。| 挨拶パックでは、フランス語、スペイン語、ヒンズー語など、様々な言語の挨拶を聞くことができます。|
    **詳細な説明**| 商品の機能や使用要件など詳細な説明。 ユーザーはこの説明を見ます。| 挨拶パックでは、フランス語、スペイン語、ヒンズー語など、様々な言語の挨拶を聞くことができます。|
    **小さいアイコン**| スキルストアや Alexa アプリで商品表示に利用する小さいアイコン。  もしお持ちでなければ、このプレースフォルダーアイコンを利用することもできます。| https://skillsassets.s3-ap-northeast-1.amazonaws.com/icons/GreetingsPack_108.png|
    **大きいアイコン**| スキルストアや Alexa アプリで商品表示に利用する大きいアイコン。 もしお持ちでなければ、この代用アイコンを利用することもできます。| https://skillsassets.s3-ap-northeast-1.amazonaws.com/icons/GreetingsPack_512.png|
    **購入プロンプトの説明**| 商品を購入したりサブスクリプションをキャンセルするときにユーザーが聞く商品の説明。| 挨拶パックを購入すると、フランス語、スペイン語、ヒンズー語など、様々な言語の挨拶を聞くことができます。|
    **購入確認の説明**| Alexa アプリのスキルカードで表示される商品の説明。ユーザーはこれを目にします。| 挨拶パックを購入しました。フランス語、スペイン語、ヒンズー語など、様々な言語の挨拶を聞くことができます。|
    > ISPやスキルのアイコン作成にお困りなら、[Alexa Skill Icon Builder](https://developer.amazon.com/docs/tools/icon-builder.html) を参照してください。

1. **保存** をクリックします。
1. **価格設定と購入可能状況** セクションを設定します。このサンプルスキルでは、購入可能状況は amazon.co.jp、価格は100円 (JPY)を、税金のカテゴリーでは **ソフトウェア** を選択します。実際の商品にはどの選択を使うべきか、税務の専門家に相談してください。税金のカテゴリーに指定できるオプションは [ここ](https://developer.amazon.com/docs/in-skill-purchase/create-isp-dev-console.html#tax-category) にリストされています。
1. 通常、審査チームがスキル内商品を見つけたりテストするために、テスト手順を提供します。(ここでは、**認定** タブで指定する一般的なスキルのテスト手順とは別に、このスキル内商品に特化したテスト手順を入力します。) ここでは、ひとまずブランクのままとします。
1. 画面右上の**保存**ボタンをクリックします。
1. 必要な情報がすべて正しく入力されてると、スキルにスキル内商品をリンクさせるための **スキルへのリンク** がクリックできるはずです。そうでない場合、**継続** をクリックして不足している情報を補ってください。
1. お疲れ様でした! 以上で、スキルにサブスクリプションが追加できました。

## **サブスクリプション商品**を作成する
1. 次に、買い切り型商品と同様の手順で、サブスクリプション商品を登録します。以下の表を使って必要な情報を入力してください。記載のない値（価格など）は任意に設定してください。**特に参照名のスペルは間違えないように注意してください。**

   項目|説明|サンプル値
    ---|----|--------
    **表示名**|この商品の表示名。 ユーザーはこの名前を見たり聞いたりします。| プレミアムサブスクリプション|
    **説明**| 商品の簡単な説明。 ユーザーはこの説明を聞くことになります。| プレミアムサブスクリプションでは、いろんな国の挨拶をよりリアルな発音で聞くことができます。|
    **詳細な説明**| 商品の機能や使用要件など詳細な説明。 ユーザーはこの説明を見ます。| プレミアムサブスクリプションでは、いろんな国の挨拶をよりリアルな発音で聞くことができます。|
    **小さいアイコン**| スキルストアや Alexa アプリで商品表示に利用する小さいアイコン。  もしお持ちでなければ、このプレースフォルダーアイコンを利用することもできます。| https://skillsassets.s3-ap-northeast-1.amazonaws.com/icons/PremiumSubscription_108.png|
    **大きいアイコン**| スキルストアや Alexa アプリで商品表示に利用する大きいアイコン。 もしお持ちでなければ、この代用アイコンを利用することもできます。| https://skillsassets.s3-ap-northeast-1.amazonaws.com/icons/PremiumSubscription_512.png|
    **購入プロンプトの説明**| 商品を購入したりサブスクリプションをキャンセルするときにユーザーが聞く商品の説明。| プレミアムサブスクリプションを購入すると、Amazon Pollyの様々な声を使って、ヒンズー語、スペイン語、イタリア語など、様々な言語の挨拶を、よりリアルな発音で聞くことができます。|
    **購入確認の説明**| Alexa アプリのスキルカードで表示される商品の説明。ユーザーはこれを目にします。| プレミアムサブスクリプションを購入しました。様々な国の挨拶を、よりリアルな発音で聞くことができます。|

1. **保存** をクリックします。
1. **価格設定と購入可能状況** セクションを設定します。このサンプルスキルでは、購入可能状況は amazon.co.jp、価格は100円 (JPY)を、税金のカテゴリーでは **ソフトウェア** を選択します。実際の商品にはどの選択を使うべきか、税務の専門家に相談してください。税金のカテゴリーに指定できるオプションは [ここ](https://developer.amazon.com/docs/in-skill-purchase/create-isp-dev-console.html#tax-category) にリストされています。
1. **請求** のセクションを設定します。請求の頻度は**毎月**、試用期間は7日に設定します。必要に応じて変更してください。
1. 通常、審査チームがスキル内商品を見つけたりテストするために、テスト手順を提供します。(ここでは、**認定** タブで指定する一般的なスキルのテスト手順とは別に、このスキル内商品に特化したテスト手順を入力します。) ここでは、ひとまずブランクのままとします。
1. 画面右上の**保存**ボタンをクリックします。
1. 必要な情報がすべて正しく入力されてると、スキルにスキル内商品をリンクさせるための **スキルへのリンク** がクリックできるはずです。そうでない場合、**継続** をクリックして不足している情報を補ってください。

お疲れ様でした!  以上でサンプルスキルのためのスキル内商品を追加することができました。早速テストしてみましょう。

 > このサンプルスキルでは、これらの値のままで大丈夫ですが、実際のスキル内商品を作成するときには、独自のアイコンなど各設定値は適切に入力してください。サンプルの値のままだと審査には通過できないでしょう。

> スキル内商品のページから離れる前に、**テスト購入をリセット** というリンクがあることを覚えておいてください。テストで購入した商品をリセットするとき、これらのリンクを使います。

[![Next](./next.png)](./4-testing.md)
